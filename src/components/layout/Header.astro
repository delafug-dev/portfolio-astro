---
import MenuIcon from "@/components/ui/icons/MenuIcon.astro";
import CloseIcon from "@/components/ui/icons/CloseIcon.astro";
---

<div
  class="hidden top-0 left-0 z-50 fixed bg-background-bento w-screen h-screen overlay-menu"
  id="overlay"
>
  <button class="top-10 right-2 absolute" id="toggle_button_menu">
    <CloseIcon className="w-[68px] h-[68px]" />
  </button>
  <div>
    <ul class="bottom-40 absolute flex flex-col gap-6">
      <li>
        <a
          href="#works-section"
            class="ml-2 font-bold text-gray-400 hover:text-white md:text-6xl text-7xl tracking-[-0.01rem] transition-colors duration-300"
          >Works.</a
        >
      </li>
      <!-- <li>
        <a
          href="#works-section"
          class="ml-2 font-bold text-gray-400 hover:text-white md:text-6xl text-7xl tracking-[-0.01rem] transition-colors duration-300"
          >Projects.</a
        >
      </li> -->
      <li>
        <a
          href="mailto:adelafuentegarceso@gmail.com?subject=Project Inquiry&body=Hi! I have a project in mind and would like to discuss it with you."
          class="ml-2 font-bold text-gray-400 hover:text-white md:text-6xl text-7xl tracking-[-0.01rem] transition-colors duration-300"
          >Contact.</a
        >
      </li>
    </ul>
  </div>
</div>

<header>
  <nav
    id="header-nav"
    class="flex flex-row justify-between items-center xl:mx-auto max-w-full font-semibold fade-up bentoHeaderFooter"
  >
    <span class="m-0 py-5 pl-[42px] font-semibold text-white tracking-wide"
      >devlafug.</span
    >
    <ul
      class="hidden box-border lg:flex flex-row justify-between items-center gap-14 m-0 pr-[52px]"
    >
      <li>
        <a href="#works-section" class="font-medium text-gray-400 hover:text-white tracking-[-0.01rem] transition-colors duration-300">
          works.
        </a>
      </li>
      <!-- <li>
        <a
          href="#projects-section"
          class="font-medium text-gray-400 hover:text-white tracking-[-0.01rem] transition-colors duration-300"
          >projects.</a
        >
      </li> -->
      <li>
        <a
          href="mailto:adelafuentegarceso@gmail.com?subject=Project Inquiry&body=Hi! I have a project in mind and would like to discuss it with you."
          class="font-medium text-gray-400 hover:text-white tracking-[-0.01rem] transition-colors duration-300"
          >contact.</a
        >
      </li>
    </ul>
    <button class="lg:hidden m-0 pr-[42px]" id="toggle_button">
      <MenuIcon className="w-8 h-8" />
    </button>
  </nav>
</header>

<script is:inline>
  window.addEventListener("DOMContentLoaded", () => {
    const nav = document.getElementById("header-nav");
    if (!nav) return;
    void nav.offsetHeight;
    nav.classList.add("is-animated");
  });
  
  const toggleButton = document.getElementById("toggle_button");
  const toggleButtonMenu = document.getElementById("toggle_button_menu");
  const overlay = document.getElementById("overlay");
  
  // Función para cerrar el overlay
  function closeOverlay() {
    if (overlay) {
      overlay.style.display = "none";
      // Restaurar scroll
      document.body.style.overflow = "";
    }
  }
  
  // Función para abrir el overlay
  function openOverlay() {
    if (overlay) {
      overlay.style.display = "flex";
      overlay.style.flexDirection = "column";
      // Bloquear scroll
      document.body.style.overflow = "hidden";
    }
  }
  
  // Toggle para abrir overlay
  if (toggleButton && overlay) {
    toggleButton.addEventListener("click", () => {
      if (overlay.style.display === "flex") {
        closeOverlay();
      } else {
        openOverlay();
      }
    });
  }
  
  // Toggle para cerrar overlay (botón X)
  if (toggleButtonMenu && overlay) {
    toggleButtonMenu.addEventListener("click", () => {
      closeOverlay();
    });
  }
  
  // Cerrar overlay al hacer click en cualquier link del menú móvil
  if (overlay) {
    const menuLinks = overlay.querySelectorAll("a");
    menuLinks.forEach(link => {
      link.addEventListener("click", () => {
        closeOverlay();
      });
    });
  }
</script>
