---
import "../styles/global.css";
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>Astro Basics</title>
  </head>
  <body class="bg-light-background dark:bg-background py-6">
    <!-- Cursor personalizado -->
    <div class="custom-cursor" id="custom-cursor"></div>

    <main class="mx-4 2xl:mx-auto xl:mx-6 max-w-[1240px]">
      <slot />
    </main>

    <script is:inline>
      // Cursor personalizado
      document.addEventListener("DOMContentLoaded", () => {
        const cursor = document.getElementById("custom-cursor");
        if (!cursor) return;

        let mouseX = 0;
        let mouseY = 0;
        let cursorX = 0;
        let cursorY = 0;

        // Tracking del mouse
        document.addEventListener("mousemove", (e) => {
          mouseX = e.clientX;
          mouseY = e.clientY;
        });

        // Animación suave del cursor
        function animateCursor() {
          const speed = 0.15; // Velocidad del seguimiento (0.1 = muy suave, 0.3 = más rápido)

          cursorX += (mouseX - cursorX) * speed;
          cursorY += (mouseY - cursorY) * speed;

          cursor.style.left = cursorX + "px";
          cursor.style.top = cursorY + "px";

          requestAnimationFrame(animateCursor);
        }
        animateCursor();

        // Efecto de click
        document.addEventListener("mousedown", () => {
          cursor.classList.add("clicked");
        });

        document.addEventListener("mouseup", () => {
          cursor.classList.remove("clicked");
        });

        // Efecto hover en elementos interactivos
        const interactiveElements = document.querySelectorAll(
          'button, a, [role="button"], .cursor-pointer'
        );

        interactiveElements.forEach((el) => {
          el.addEventListener("mouseenter", () => {
            cursor.classList.add("hovering");
          });

          el.addEventListener("mouseleave", () => {
            cursor.classList.remove("hovering");
          });
        });
      });

      // Theme management global
      window.themeManager = {
        init: function () {
          const savedTheme = localStorage.getItem("theme") || "dark";

          if (savedTheme === "light") {
            document.body.classList.add("light");
            this.applyThemeToAll(true);
          }
        },

        toggle: function () {
          const isLight = document.body.classList.toggle("light");
          localStorage.setItem("theme", isLight ? "light" : "dark");
          this.applyThemeToAll(isLight);
          return isLight;
        },

        applyThemeToAll: function (isLight) {
          // Aplicar a todos los bentos
          document.querySelectorAll(".bento").forEach((el) => {
            if (isLight) {
              el.classList.add("light");
            } else {
              el.classList.remove("light");
            }
          });

          // Aplicar a secciones específicas
          document.querySelectorAll(".bentoSocialMedia").forEach((el) => {
            if (isLight) {
              el.classList.add("light");
            } else {
              el.classList.remove("light");
            }
          });

          // Aplicar a header y footer (bentoHeaderFooter)
          document.querySelectorAll(".bentoHeaderFooter").forEach((el) => {
            if (isLight) {
              el.classList.add("light");
            } else {
              el.classList.remove("light");
            }
          });
        },
      };

      // Inicializar el tema al cargar
      window.themeManager.init();
    </script>
  </body>
</html>

<style>
  html,
  body {
    margin: 0;
    width: 100%;
  }
  
  html {
    height: 100%;
  }
  
  body {
    min-height: 100%;
  }
</style>
